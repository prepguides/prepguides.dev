<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Core Logic Tester - PrepGuides.dev</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .test-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            background: #f9fafb;
        }

        .test-section h2 {
            color: #374151;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .test-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .btn.success {
            background: #10b981;
        }

        .btn.danger {
            background: #ef4444;
        }

        .btn.warning {
            background: #f59e0b;
        }

        .test-output {
            background: #1f2937;
            color: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-bottom: 20px;
        }

        .test-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .result-card.success {
            border-left-color: #10b981;
        }

        .result-card.failed {
            border-left-color: #ef4444;
        }

        .result-card h3 {
            margin-bottom: 10px;
            color: #374151;
        }

        .result-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .stat {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .stat.passed {
            color: #10b981;
            font-weight: 600;
        }

        .stat.failed {
            color: #ef4444;
            font-weight: 600;
        }

        .test-details {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .overall-status {
            text-align: center;
            padding: 30px;
            background: #f3f4f6;
            border-radius: 12px;
            margin-top: 30px;
        }

        .status-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .status-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .status-details {
            color: #6b7280;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="algorithms.html" class="back-button">‚Üê Back to Algorithms</a>
            <h1>üß™ Algorithm Core Logic Tester</h1>
            <p class="subtitle">Test the actual algorithm implementations independent of UI rendering</p>
        </header>

        <div class="content">
            <div class="test-section">
                <h2>üöÄ Test Controls</h2>
                <div class="test-controls">
                    <button class="btn" onclick="runAllTests()">Run All Tests</button>
                    <button class="btn success" onclick="testBST()">Test BST</button>
                    <button class="btn success" onclick="testGraph()">Test Graph</button>
                    <button class="btn success" onclick="testTrie()">Test Trie</button>
                    <button class="btn success" onclick="testSorting()">Test Sorting</button>
                    <button class="btn warning" onclick="clearOutput()">Clear Output</button>
                    <button class="btn danger" onclick="exportResults()">Export Results</button>
                </div>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Running tests...</p>
                </div>

                <div class="test-output" id="testOutput">
                    <div style="color: #9ca3af;">Click "Run All Tests" to start testing the core algorithm logic...</div>
                </div>
            </div>

            <div class="test-results" id="testResults">
                <!-- Results will be populated here -->
            </div>

            <div class="overall-status" id="overallStatus">
                <div class="status-icon">‚è≥</div>
                <div class="status-text">Ready to Test</div>
                <div class="status-details">Click "Run All Tests" to validate all algorithm implementations</div>
            </div>
        </div>
    </div>

    <script src="algorithm-core-tests.js"></script>
    <script>
        let currentTester = null;
        let testResults = {};

        function log(message, type = 'info') {
            const output = document.getElementById('testOutput');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: '#3b82f6',
                success: '#10b981',
                error: '#ef4444',
                warning: '#f59e0b'
            };
            
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `<span style="color: #9ca3af;">[${timestamp}]</span> <span style="color: ${colors[type]};">[${type.toUpperCase()}]</span> ${message}`;
            output.appendChild(logEntry);
            output.scrollTop = output.scrollHeight;
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        function runAllTests() {
            showLoading(true);
            clearOutput();
            log('üß™ Starting comprehensive algorithm core logic tests...', 'info');
            
            currentTester = new AlgorithmTester();
            
            // Override console.log to capture test output
            const originalLog = console.log;
            console.log = (...args) => {
                log(args.join(' '), 'info');
                originalLog.apply(console, args);
            };
            
            setTimeout(() => {
                currentTester.runAllTests();
                testResults = currentTester.results;
                updateResultsDisplay();
                updateOverallStatus();
                showLoading(false);
                console.log = originalLog;
            }, 100);
        }

        function testBST() {
            showLoading(true);
            clearOutput();
            log('üå≥ Testing Binary Search Tree core logic...', 'info');
            
            const tester = new AlgorithmTester();
            setTimeout(() => {
                tester.testBST();
                testResults.bst = tester.results.bst;
                updateResultsDisplay();
                showLoading(false);
            }, 100);
        }

        function testGraph() {
            showLoading(true);
            clearOutput();
            log('üï∏Ô∏è Testing Graph Traversal core logic...', 'info');
            
            const tester = new AlgorithmTester();
            setTimeout(() => {
                tester.testGraph();
                testResults.graph = tester.results.graph;
                updateResultsDisplay();
                showLoading(false);
            }, 100);
        }

        function testTrie() {
            showLoading(true);
            clearOutput();
            log('üìù Testing Trie Operations core logic...', 'info');
            
            const tester = new AlgorithmTester();
            setTimeout(() => {
                tester.testTrie();
                testResults.trie = tester.results.trie;
                updateResultsDisplay();
                showLoading(false);
            }, 100);
        }

        function testSorting() {
            showLoading(true);
            clearOutput();
            log('üî¢ Testing Sorting Algorithms core logic...', 'info');
            
            const tester = new AlgorithmTester();
            setTimeout(() => {
                tester.testSorting();
                testResults.sorting = tester.results.sorting;
                updateResultsDisplay();
                showLoading(false);
            }, 100);
        }

        function clearOutput() {
            document.getElementById('testOutput').innerHTML = '';
        }

        function updateResultsDisplay() {
            const resultsContainer = document.getElementById('testResults');
            resultsContainer.innerHTML = '';

            const algorithms = [
                { key: 'bst', name: 'Binary Search Tree', icon: 'üå≥' },
                { key: 'graph', name: 'Graph Traversal', icon: 'üï∏Ô∏è' },
                { key: 'trie', name: 'Trie Operations', icon: 'üìù' },
                { key: 'sorting', name: 'Sorting Algorithms', icon: 'üî¢' }
            ];

            algorithms.forEach(algo => {
                const result = testResults[algo.key];
                if (!result) return;

                const totalTests = result.passed + result.failed;
                const successRate = totalTests > 0 ? Math.round((result.passed / totalTests) * 100) : 0;
                
                const card = document.createElement('div');
                card.className = `result-card ${result.failed === 0 ? 'success' : 'failed'}`;
                
                card.innerHTML = `
                    <h3>${algo.icon} ${algo.name}</h3>
                    <div class="result-stats">
                        <span class="stat passed">‚úÖ ${result.passed} passed</span>
                        <span class="stat failed">‚ùå ${result.failed} failed</span>
                    </div>
                    <div class="test-details">
                        <div>Total Tests: ${totalTests}</div>
                        <div>Success Rate: ${successRate}%</div>
                        <div>Status: ${result.failed === 0 ? 'All tests passed' : 'Some tests failed'}</div>
                    </div>
                `;
                
                resultsContainer.appendChild(card);
            });
        }

        function updateOverallStatus() {
            const totalPassed = Object.values(testResults).reduce((sum, r) => sum + (r.passed || 0), 0);
            const totalFailed = Object.values(testResults).reduce((sum, r) => sum + (r.failed || 0), 0);
            const totalTests = totalPassed + totalFailed;
            const successRate = totalTests > 0 ? Math.round((totalPassed / totalTests) * 100) : 0;

            const statusContainer = document.getElementById('overallStatus');
            
            if (totalTests === 0) {
                statusContainer.innerHTML = `
                    <div class="status-icon">‚è≥</div>
                    <div class="status-text">Ready to Test</div>
                    <div class="status-details">Click "Run All Tests" to validate all algorithm implementations</div>
                `;
            } else if (totalFailed === 0) {
                statusContainer.innerHTML = `
                    <div class="status-icon">üéâ</div>
                    <div class="status-text">All Tests Passed!</div>
                    <div class="status-details">${totalPassed}/${totalTests} tests passed (${successRate}%) - All algorithm core logic is working correctly</div>
                `;
            } else {
                statusContainer.innerHTML = `
                    <div class="status-icon">‚ö†Ô∏è</div>
                    <div class="status-text">Some Tests Failed</div>
                    <div class="status-details">${totalPassed}/${totalTests} tests passed (${successRate}%) - ${totalFailed} tests need attention</div>
                `;
            }
        }

        function exportResults() {
            if (!currentTester) {
                log('No test results to export. Run tests first.', 'warning');
                return;
            }

            const results = {
                timestamp: new Date().toISOString(),
                summary: {
                    totalPassed: Object.values(testResults).reduce((sum, r) => sum + (r.passed || 0), 0),
                    totalFailed: Object.values(testResults).reduce((sum, r) => sum + (r.failed || 0), 0),
                    successRate: 0
                },
                details: testResults
            };

            results.summary.successRate = results.summary.totalPassed + results.summary.totalFailed > 0 
                ? Math.round((results.summary.totalPassed / (results.summary.totalPassed + results.summary.totalFailed)) * 100)
                : 0;

            const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `algorithm-test-results-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            log('Test results exported successfully!', 'success');
        }

        // Auto-run tests on page load
        window.addEventListener('load', () => {
            log('üöÄ Algorithm Core Logic Tester loaded successfully!', 'success');
            log('Click "Run All Tests" to validate all algorithm implementations', 'info');
        });
    </script>
</body>
</html>
